{% extends 'clubs/base.html' %}

{% block title %}{{ club.name }} - MatchFeeMate{% endblock %}

{% block content %}
<!-- Club heading and details -->
<h1>{{ club.name }}</h1>

<p><strong>Home Ground:</strong> {{ club.home_ground|default:"Not set" }}</p>
<p><strong>Default Match Fee:</strong> Â£{{ club.default_match_fee }}</p>
<p><strong>Created by:</strong> {{ club.created_by.email }}</p>

<!-- Action links -->
<a href="{% url 'club_update' pk=club.pk %}">Edit</a> |
<a href="{% url 'club_delete' pk=club.pk %}">Delete</a>

<hr>

<!-- Players section -->
<h2>Players</h2>
<a href="{% url 'player_create' club_pk=club.pk %}">Add Player</a>

{% if club.players.all %}
    <ul>
    {% for player in club.players.all %}
        <li>
            {{ player.name }} ({{ player.get_role_display }})
            - <a href="{% url 'player_update' pk=player.pk %}">Edit</a>
            - <a href="{% url 'player_delete' pk=player.pk %}">Delete</a>
        </li>
    {% endfor %}
    </ul>
{% else %}
    <p>No players yet.</p>
{% endif %}

<hr>

<!-- Opposition section -->
<h2>Opposition Teams</h2>
<a href="{% url 'opposition_create' club_pk=club.pk %}">Add Opposition</a>

{% if club.oppositions.all %}
    <ul>
    {% for opp in club.oppositions.all %}
        <li>
            {{ opp.name }} {% if opp.home_ground %}({{ opp.home_ground }}){% endif %}
            - <a href="{% url 'opposition_update' pk=opp.pk %}">Edit</a>
            - <a href="{% url 'opposition_delete' pk=opp.pk %}">Delete</a>
        </li>
    {% endfor %}
    </ul>
{% else %}
    <p>No opposition teams yet.</p>
{% endif %}

<hr>

<!-- Matches section -->
<h2>Matches</h2>
<a href="{% url 'match_create' club_pk=club.pk %}">Schedule Match</a>

{% if club.matches.all %}
<table border="1" cellpadding="5" style="margin-top: 10px;">
    <tr>
        <th>Date</th>
        <th>Time</th>
        <th>Opposition</th>
        <th>H/A</th>
        <th>Selected</th>
        <th>Available</th>
        <th>Maybe</th>
        <th>Unavail</th>
        <th>Awaiting</th>
        <th>Status</th>
        <th>Actions</th>
    </tr>
    {% for match in club.matches.all %}
    <tr>
        <td>{{ match.date }}</td>
        <td>{{ match.time|default:"TBC" }}</td>
        <td>{{ match.opposition.name }}</td>
        <td>{% if match.is_home %}H{% else %}A{% endif %}</td>
        <td>{{ match.selected_count }}</td>
        <td>{{ match.available_count }}</td>
        <td>{{ match.maybe_count }}</td>
        <td>{{ match.unavailable_count }}</td>
        <td>{{ match.awaiting_count }}</td>
        <td>{{ match.get_status_display }}</td>
        <td>
            <a href="{% url 'match_detail' pk=match.pk %}">View</a> |
            <a href="{% url 'team_selection' match_pk=match.pk %}">Select</a> |
            <a href="{% url 'bulk_availability' match_pk=match.pk %}">Availability</a>
        </td>
    </tr>
    {% endfor %}
</table>
{% else %}
    <p>No matches scheduled.</p>
{% endif %}
{% endblock %}
```

Test it:
```
python manage.py runserver
```
```
http://127.0.0.1:8000/club/1/